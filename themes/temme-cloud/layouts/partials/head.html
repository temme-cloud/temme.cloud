<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

<!-- SEO Title -->
{{ block "title" . }}
    <title>
        {{- if .IsHome -}}
            {{ $.Site.Title }} â€” {{ .Site.Language.Params.subtitle }}
        {{- else -}}
            {{ .Title }} | {{ $.Site.Title }}
        {{- end -}}
    </title>
{{ end }}

<!-- SEO Meta Description -->
{{- $description := "" -}}
{{- if .IsHome -}}
    {{- $description = .Site.Language.Params.description -}}
{{- else if .Params.Description -}}
    {{- $description = .Params.Description -}}
{{- else if .Summary -}}
    {{- $description = .Summary | plainify | truncate 160 -}}
{{- else -}}
    {{- $description = .Site.Language.Params.description -}}
{{- end -}}
<meta name="description" content="{{ $description }}" />

<!-- Robots -->
{{ if or .Params.noindex .Params.robots }}
<meta name="robots" content="{{ if .Params.noindex }}noindex{{ else }}{{ .Params.robots }}{{ end }}" />
{{ end }}

<!-- Author & Keywords -->
<meta name="author" content="{{ .Site.Params.author }}" />
{{ with .Site.Params.keywords }}<meta name="keywords" content="{{ . }}" />{{ end }}

<!-- Theme Color -->
<meta name="theme-color" content="{{ .Site.Params.themeColor }}" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}" />

<!-- hreflang for multilingual SEO -->
{{ if .IsTranslated }}
    {{ range .Translations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
    {{ end }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" />
{{ end }}
<link rel="alternate" hreflang="x-default" href="{{ .Site.Home.Permalink }}" />

<!-- Open Graph -->
<meta property="og:site_name" content="{{ .Site.Title }}" />
<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}" />
<meta property="og:description" content="{{ $description }}" />
<meta property="og:type" content="{{ if .IsHome }}website{{ else if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:locale" content="{{ .Language.Lang }}" />
{{ with .Site.Params.images }}
<meta property="og:image" content="{{ index . 0 | absURL }}" />
{{ end }}
{{ if .IsPage }}
    {{ with .Params.images }}
    <meta property="og:image" content="{{ index . 0 | absURL }}" />
    {{ end }}
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}" />
<meta name="twitter:description" content="{{ $description }}" />
{{ with .Site.Params.images }}
<meta name="twitter:image" content="{{ index . 0 | absURL }}" />
{{ end }}

<!-- Article metadata -->
{{ if .IsPage }}
    {{ range .Params.categories }}
    <meta property="article:section" content="{{ . }}" />
    {{ end }}
    {{ with .Date }}
    <meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}" />
    {{ end }}
    {{ with .Lastmod }}
    <meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}" />
    {{ end }}
{{ end }}

<!-- Schema.org structured data -->
{{ template "_internal/schema.html" . }}

<!-- Fonts: self-hosted with fingerprinted URLs -->
{{- partial "fonts.html" . -}}

<!-- CSS -->
{{ $opts := dict "transpiler" "libsass" "targetPath" "main.css" "outputStyle" "compressed" "enableSourceMap" (not hugo.IsProduction) }}
{{ with resources.Get "scss/main.scss" | toCSS $opts | minify | fingerprint }}
  <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
{{ end }}

{{ range $val := $.Site.Params.customCSS }}
    {{ if gt (len $val) 0 }}
        <link rel="stylesheet" type="text/css" href="{{ $val }}">
    {{ end }}
{{ end }}

<!-- Icons -->
{{- partial "favicons.html" . }}

<!-- RSS -->
{{ with .OutputFormats.Get "rss" -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end -}}

<!-- JSON Feed -->
{{ if .OutputFormats.Get "json" }}
<link href="{{ if .OutputFormats.Get "json" }}{{ .Site.BaseURL }}feed.json{{ end }}" rel="alternate"
    type="application/json" title="{{ .Site.Title }}" />
{{ end }}

<!-- Custom head tags -->
{{- if templates.Exists "partials/extra-head.html" -}}
    {{ partial "extra-head.html" . }}
{{- end }}

<!-- Google Analytics internal template -->
{{- if .Site.Config.Services.GoogleAnalytics.ID }}
    {{ template "_internal/google_analytics.html" . }}
{{- end }}

<!-- Plausible.io -->
{{- if $.Site.Params.plausibleDataDomain }}
    <script defer data-domain="{{ .Site.Params.plausibleDataDomain }}" src="{{ .Site.Params.plausibleScriptSource }}"></script>
{{- end}}
